<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>히스토리 타임머신 (History Time Machine)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #000;
            --text-color: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Pretendard', -apple-system, sans-serif;
            overflow: hidden;
        }

        .wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            transition: background-image 1s ease-in-out;
        }

        /* 캡처 아이콘 버튼 스타일 */
        .capture-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .capture-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.3);
        }

        .capture-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        /* 글자 시인성을 위한 이중 레이어 오버레이 */
        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.9) 100%);
            z-index: 1;
        }

        .main-content {
            position: relative;
            z-index: 2;
            padding: 50px 30px;
            max-width: 600px;
            animation: fadeInUp 1.2s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .date-text {
            font-size: 1rem;
            letter-spacing: 3px;
            color: #ffca28; /* 포인트 컬러 */
            margin-bottom: 10px;
            font-weight: 600;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 20px;
            word-break: keep-all;
            text-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .desc {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #efefef;
            font-weight: 300;
            word-break: keep-all;
        }

        .loader {
            position: fixed;
            top:0; left:0; width:100%; height:100%;
            background:#000; display:flex; justify-content:center; align-items:center;
            z-index: 1000; transition: 0.5s;
        }

        .spinner {
            width: 50px; height: 50px;
            border: 5px solid #333; border-top: 5px solid #ffca28;
            border-radius: 50%; animation: spin 1s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader" class="loader"><div class="spinner"></div></div>

    <div class="capture-btn" id="capture-btn" title="화면 저장">
        <svg viewBox="0 0 24 24">
            <path d="M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2V4zm6 9l-4 5h12l-3-4-2.03 2.71L10 13zm7-11h-7v2h7v7h2V4c0-1.1-.9-2-2-2zm0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2v7zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4v-7z"/>
        </svg>
    </div>

    <div id="app" class="wrapper">
        <div class="overlay"></div>
        <div class="main-content">
            <p id="date-text" class="date-text"></p>
            <h1 id="event-title" class="title"></h1>
            <p id="event-desc" class="desc"></p>
        </div>
    </div>

    <script>
        const historyDatabase = {
            "01-10": {
                title: "세계 최초의 지하철 탄생",
                year: "1863년",
                desc: "영국 런던에서 증기기관차를 이용한 세계 첫 지하철, 메트로폴리탄 철도가 개통되었습니다. 이는 도시 교통 역사의 위대한 시작이었습니다.",
                imgUrl: "https://images.unsplash.com/photo-1510923119584-fc671e775e1c?q=80&w=1200&auto=format&fit=crop"
            },
            "01-11": {
                title: "새로운 역사가 쓰여집니다",
                year: "2026년",
                desc: "1월 11일은 누군가에게는 일상의 시작이지만, 누군가에게는 인생의 전환점이 되는 역사적인 하루입니다. 당신의 오늘을 기록해보세요.",
                imgUrl: "https://images.unsplash.com/photo-1461360370896-922624d12aa1?q=80&w=1200&auto=format&fit=crop"
            },
            "09-11": {
                title: "비극적인 9.11 테러 발생",
                year: "2001년",
                desc: "뉴욕 세계무역센터를 향한 테러 공격이 발생했습니다. 이 사건은 전 세계 안보 질서를 영구적으로 변화시킨 현대사의 비극입니다.",
                imgUrl: "https://images.unsplash.com/photo-1584646098378-0874589d76b1?q=80&w=1200&auto=format&fit=crop"
            },
            "07-20": {
                title: "인류의 위대한 도약, 달 착륙",
                year: "1969년",
                desc: "아폴로 11호가 달 표면에 안착하며 닐 암스트롱이 인류 최초의 발자국을 남겼습니다. 우주 탐사 역사상 가장 경이로운 순간입니다.",
                imgUrl: "https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=1200&auto=format&fit=crop"
            },
            "default": {
                title: "역사는 오늘도 흐르고 있습니다",
                year: "Everyday",
                desc: "과거의 오늘에는 수많은 사건이 있었습니다. 당신의 오늘 또한 누군가에게는 소중한 역사가 될 것입니다.",
                imgUrl: "https://images.unsplash.com/photo-1505664194779-8beaceb93744?q=80&w=1200&auto=format&fit=crop"
            }
        };

        function renderHistory() {
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const key = `${month}-${day}`;

            const data = historyDatabase[key] || historyDatabase["default"];
            
            document.getElementById('date-text').innerText = `${month}.${day} | ${data.year}`;
            document.getElementById('event-title').innerText = data.title;
            document.getElementById('event-desc').innerText = data.desc;

            const bgImg = new Image();
            bgImg.crossOrigin = "Anonymous"; // 캡처를 위해 크로스 도메인 허용 설정
            bgImg.src = data.imgUrl;
            bgImg.onload = () => {
                document.getElementById('app').style.backgroundImage = `url('${data.imgUrl}')`;
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 500);
            };
        }

        // 캡처 기능 구현
        document.getElementById('capture-btn').addEventListener('click', function() {
            const btn = this;
            btn.style.display = 'none'; // 캡처 시 버튼은 안 보이게 숨김

            html2canvas(document.body, {
                useCORS: true, // 외부 이미지 로드 허용
                allowTaint: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `History_Time_Machine_${new Date().getTime()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                btn.style.display = 'flex'; // 캡처 후 다시 표시
            });
        });

        window.onload = renderHistory;
    </script>
</body>
</html>